<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Panel Administrativo</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css">
     <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script>
     <link rel="stylesheet" href="css/styles.css">
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
     <div class="wrapper">
          <aside id="sidebar" class="js-sidebar">
               <div class="h-100">
                    <div class="sidebar-logo">
                         <a href="/dashboard">Proyecto Automatizacion</a>
                    </div>
                    <ul class="sidebar-nav">
                         <li class="sidebar-header">
                              Panel Administrativo
                         </li>
                         <li class="sidebar-item">
                              <a href="#" class="sidebar-link collapsed" data-bs-target="#pages"
                                   data-bs-toggle="collapse" aria-expanded="false"><i
                                        class="fa-solid fa-file-lines pe-2"></i>
                                   Formularios
                              </a>
                              <ul id="pages" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                                   <li class="sidebar-item">
                                        <a href="https://docs.google.com/forms/d/e/1FAIpQLScOO-zTZ6k-O-kZdV4UNfFB4PMA3azKPr7DU8jDzBBoKt0zIw/viewform"
                                             class="sidebar-link"><i class="fa-solid fa-clipboard pe-2"></i>Form.
                                             Matrículas</a>
                                   </li>
                                   <li class="sidebar-item">
                                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSc9OtInBXC61Nxoq5p7c4BVy17CUVp1ub-QfdI2c_WSoE3QCQ/viewform"
                                             class="sidebar-link"><i class="fa-solid fa-certificate pe-2"></i>Form.
                                             Certificado</a>
                                   </li>
                              </ul>
                         </li>
                         <li class="sidebar-item">
                              <a href="#" class="sidebar-link collapsed" data-bs-target="#posts"
                                   data-bs-toggle="collapse" aria-expanded="false"><i
                                        class="fa-solid fa-sliders pe-2"></i>
                                   Registros
                              </a>
                              <ul id="posts" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                                   <li class="sidebar-item">
                                        <a href="/matriculas" class="sidebar-link"><i
                                                  class="fa-solid fa-user-graduate pe-2"></i>Matriculados</a>
                                   </li>
                                   <li class="sidebar-item">
                                        <a href="/solicitudes" class="sidebar-link"><i
                                                  class="fa-solid fa-clipboard-list pe-2"></i>Solicitudes</a>
                                   </li>
                              </ul>
                         </li>
                    </ul>
               </div>
          </aside>
          <div class="main">
               <nav class="navbar navbar-expand px-3 border-bottom">
                    <button class="btn" id="sidebar-toggle" type="button">
                         <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse navbar">
                         <ul class="navbar-nav">
                              <li class="nav-item dropdown">
                                   <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0">
                                        <i class="fa-solid fa-user user-demo"></i>
                                   </a>
                                   <div class="dropdown-menu dropdown-menu-end">
                                        <a href="/logout" class="dropdown-item">Cerrar Sesión</a>
                                   </div>
                              </li>

                         </ul>
                    </div>
               </nav>
               <main class="content px-3 py-2">
                    <div class="container-fluid">
                         <div class="mb-3">
                              <h4 class="font-weight-bold">Bienvenido <%= username %>
                              </h4>
                         </div>
                         <div class="row">
                              <div class="col-12 col-md-6 d-flex">
                                   <div class="card flex-fill border-0 illustration">
                                        <div class="card-body p-0 d-flex flex-fill">
                                             <div class="row g-0 w-100">
                                                  <div class="p-3 m-1">
                                                       <h4>Proceso de Constancias y Certificados</h4>
                                                       <p class="mb-0">Panel Administrativo</p>

                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <div class="col-12 col-md-6 d-flex">
                                   <div class="card flex-fill border-0">
                                        <div class="card-body py-4">
                                             <div class="d-flex align-items-start">
                                                  <div class="flex-grow-1">
                                                       <div class="d-flex"
                                                            style="justify-content: space-around; align-items: center; text-align: center;">
                                                            <div>
                                                                 <h4 class="mb-2">
                                                                      <%= totalMatriculados %>
                                                                 </h4>
                                                                 <p class="mb-2">
                                                                      Alumnos Matriculados
                                                                 </p>
                                                            </div>
                                                            <div class="ml-8">
                                                                 <h4 class="mb-2">
                                                                      <%= totalSolicitudes %>
                                                                 </h4>
                                                                 <p class="mb-2">
                                                                      Solicitudes Recibidas
                                                                 </p>
                                                            </div>
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <div class="col-12 col-md-6">
                                   <div class="card flex-fill border-0 h-100">
                                        <div class="card-body py-4 d-flex flex-column justify-content-around">

                                             <div class="text-center fontTitle">
                                                  <h5>Gestionar Cursos</h5>
                                             </div>
                                             <div class="d-flex justify-content-around mt-1">
                                                  <div class="text-center">
                                                       <h6 class="mb-2 text-primary">
                                                            <i class="fas fa-laptop-code me-2"></i> Administrar Curso de
                                                            Sistemas
                                                       </h6>
                                                       <p class="mb-3">Administrar Cursos, horarios, etc.</p>
                                                       <a href="/cursos_sistemas" class="btn btn-outline-primary">
                                                            Administrar Curso <i class="fas fa-arrow-right"></i>
                                                       </a>
                                                       <div class="mt-3">
                                                            <img src="img/pc.png" alt="PC Image"
                                                                 class="img-fluid h-55 w-35" id="img-pc">
                                                       </div>

                                                  </div>

                                                  <div class="text-center">
                                                       <h6 class="mb-2 text-success">
                                                            <i class="fas fa-leaf me-2"></i> Administrar Curso de
                                                            Agraria
                                                       </h6>
                                                       <p class="mb-3">Administrar Cursos, horarios, etc.</p>
                                                       <a href="/cursos_produccion" class="btn btn-outline-success">
                                                            Administrar Curso <i class="fas fa-arrow-right"></i>
                                                       </a>
                                                       <div class="mt-3">
                                                            <img src="img/planta.png" alt="Planta Image"
                                                                 class="img-fluid h-55 w-35">
                                                       </div>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>


                              <div class="col-12 col-md-6">
                                   <div class="card flex-fill border-0 h-100">
                                        <div class="card-body py-4">
                                             <h5 class="mb-3">Información de Matriculados y Solicitudes</h5>
                                             <div class="d-flex justify-content-around">
                                                  <div class="chart-container">
                                                       <canvas id="matriculadosChart" width="200" height="270"></canvas>
                                                  </div>
                                                  <div class="chart-container">
                                                       <canvas id="solicitudesChart" width="200" height="270"></canvas>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>


                         </div>
                    </div>
               </main>
               <a href="#" class="theme-toggle">
                    <i class="fa-regular fa-moon"></i>
                    <i class="fa-regular fa-sun"></i>
               </a>
          </div>
     </div>
     <script>
          var ctxMatriculados = document.getElementById('matriculadosChart').getContext('2d');
          var matriculadosChart = new Chart(ctxMatriculados, {
               type: 'bar',
               data: {
                    labels: ['Matriculados'],
                    datasets: [{
                         label: 'Matriculados',
                         data: [<%= Math.round(totalMatriculados) %>],
                         backgroundColor: 'rgba(75, 192, 192, 0.2)',
                         borderColor: 'rgba(75, 192, 192, 1)',
                         borderWidth: 1
                    }]
               },
               options: {
                    scales: {
                         y: {
                              beginAtZero: true,
                              precision: 0,
                              stepSize: 1
                         }
                    }
               }
          });

          var ctxSolicitudes = document.getElementById('solicitudesChart').getContext('2d');
          var solicitudesChart = new Chart(ctxSolicitudes, {
               type: 'bar',
               data: {
                    labels: ['Solicitudes'],
                    datasets: [{
                         label: 'Solicitudes',
                         data: [<%= Math.round(totalSolicitudes) %>],
                         backgroundColor: 'rgba(255, 99, 132, 0.2)',
                         borderColor: 'rgba(255, 99, 132, 1)',
                         borderWidth: 1
                    }]
               },
               options: {
                    scales: {
                         y: {
                              beginAtZero: true,
                              precision: 0,
                              stepSize: 0
                         }
                    }
               }
          });
     </script>

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
     <script src="js/script.js"></script>
</body>

</html>